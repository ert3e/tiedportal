<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2014 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

/**
 * Product view template
 *
 * @see Mage_Catalog_Block_Product_View
 * @see Mage_Review_Block_Product_View
 */
?>
<?php $_helper = $this->helper('catalog/output'); ?>
<?php $_product = $this->getProduct(); ?>
<script type="text/javascript">
    var optionsPrice = new Product.OptionsPrice(<?php echo $this->getJsonConfig() ?>);
</script>
<div id="messages_product_view"><?php echo $this->getMessagesBlock()->getGroupedHtml() ?></div>
<div class="product-view">
	<form action="<?php echo $this->getSubmitUrl($_product, array("_secure" => true)) ?>" method="post" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?>>
		<div class="product-essential">
			<div class="col-md-4 product-media nopaddingleft">
				 <?php echo $this->getChildHtml('media') ?>
				 
				 <?php /*
				 
				 <a href="/contact-us" class="b10">
					 <div class="col-md-12 grey-left-col left-col-block t20">
						<img src="<?php echo $this->getSkinUrl('images/leftcol_Target.png'); ?>"/ >
						<strong>CLICK & COLLECT</strong><br />
						FROM OUR TRADE COUNTER
					</div>
					<div class="clear"></div>
				</a>
				
				*/ ?>
				
				<a href="/delivery" class="b10">
					<div class="col-md-12 green-left-col left-col-block">
						<img src="<?php echo $this->getSkinUrl('images/leftcol_Truck.png'); ?>"/ >
						<strong>FREE DELIVERY</strong><br />
						AVAILABLE *T&C APPLY
					</div>
					<div class="clear"></div>
				</a>
				
				<a href="/customer/account">
					<div class="col-md-12 darkgrey-left-col left-col-block">
						<img src="<?php echo $this->getSkinUrl('images/leftcol_Toolbox.png'); ?>"/ >
						<strong>TRADE ACCOUNTS</strong><br />
						FOR TRADE PRICES
					</div>
				</a>
				 
			</div>
			<div class="col-md-5 product-info">
				<div class="product-name">
					<h1><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></h1>
				</div>
				
				<?php  if ($_product->getShortDescription()):?>
				<div class="short-description">
					<div class="std"><?php echo $_helper->productAttribute($_product, nl2br($_product->getShortDescription()), 'short_description') ?></div>
				</div>
            	<?php endif; ?>
				
				<?php // echo $this->getReviewsSummaryHtml($_product, false, true)?>
				<?php // echo $this->getChildHtml('alert_urls') ?>
				<?php // echo $this->getChildHtml('extrahint') ?>
				
				
				<div class="mainFeatures t20 b20">
					<ul>
						<?php if(!empty($_product->getAttributeText('main_features'))) : ?>
                            <?php  foreach( $_product->getAttributeText('main_features') as $mainfeature ) {
                                echo '<li class="';
                                switch (trim($mainfeature)) {
                                    case 'quick':
                                        echo 'quick';
                                        break; 
                                    case 'interiorexterior':
                                        echo 'interiorexterior';
                                        break; 
                                    case 'ecofriendly':
                                        echo 'ecofriendly';
                                        break; 
                                    case 'highgrip':
                                        echo 'highgrip';
                                        break; 
                                    case 'mouldresistant':
                                        echo 'mouldresistant';
                                        break; 
                                }
                                echo '">';

                                switch (trim($mainfeature)) {  

                                    case 'quick':
                                        echo 'Quick Drying';
                                        break; 
                                    case 'interiorexterior':
                                        echo 'Interior & Exterior';
                                        break; 
                                    case 'ecofriendly':
                                        echo 'Eco Friendly';
                                        break; 
                                    case 'highgrip':
                                        echo 'High Grip';
                                        break; 
                                    case 'mouldresistant':
                                        echo 'Mould Resistant';
                                        break; 
                                }
                                echo '</li>';
                            } ?>
                        <?php endif; ?>
					</ul>
				<div class="clear"></div>
			</div>
				
				
				<ul class="t20 nav nav-tabs" role="tablist">
					<li class="active"><a href="#description" role="tab" data-toggle="tab">Description</a></li>
					<li><a href="#datasheets" role="tab" data-toggle="tab">Data Sheets</a></li>
					<li><a href="#delivery" role="tab" data-toggle="tab">Delivery</a></li>
				</ul>
				
				<div class="tab-content">
					<div class="tab-pane active" id="description">
						<?php echo $_helper->productAttribute($_product, nl2br($_product->getDescription()), 'full_description') ?>
					</div>
					<div class="tab-pane" id="datasheets">
						<ul>
							<?php if ($_product->getData('pdf_1')): ?>
								<li class="pdf1">
									<a href="http://www.sealantsdirect.co.uk<?php echo $_product->getData('pdf_1'); ?>"><span class="glyphicon glyphicon-file"></span> Safety Data Sheet</a>
								</li>
							<?php endif; ?>
							<?php if ($_product->getData('pdf_2')): ?>
								<li class="pdf2">
									<a href="http://www.sealantsdirect.co.uk<?php echo $_product->getData('pdf_2'); ?>"><span class="glyphicon glyphicon-file"></span> Technical Data Sheet</a>
								</li>
							<?php endif; ?>
						<ul>
					</div>
					<div class="tab-pane" id="delivery">
						<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('product_delivery_tab')->toHtml() ?>
					</div>
				</div>
				
			
			</div>
			<div class="col-md-3 product-saleable nopaddingright">
				<?php if ( $_product->getAttributeText('manufacturer')) : ?>
				<div class="brand-container b10">
				
					<div class="brand-image">
						<img src="/media/brands/<?php echo $_product->getAttributeText('manufacturer'); ?>.jpg" />
					</div>
					
					<h4><?php echo $_product->getAttributeText('manufacturer'); ?></h4>
					<div class="clear"></div>
				</div>
				<?php endif; ?>
				<div class="price-container">
		
					<?php echo $this->getTierPriceHtml() ?>
					<?php
						$box_qty = $_product->getData('box_qty');
						$box_price = $_product->getData('box_price');
						$lowest_price = $box_price/$box_qty;
						$current_currency = Mage::app()->getLocale()->currency(Mage::app()->getStore()->getCurrentCurrencyCode())->getSymbol();
						if($lowest_price)
						{
							echo '<div class="price-box">';
							echo '<span class="price">';
							echo $current_currency.$lowest_price;
							echo '</span><span class="label">&nbsp;Lowest Price</span>';
							echo '</div>';
						}
					?>
					<?php echo $this->getChildHtml('product_type_data') ?>
				
					<?php if (!$this->hasOptions()):?>
						<div class="add-to-box">
							<?php if($_product->isSaleable()): ?>
								<?php echo $this->getChildHtml('addtocart') ?>
							<?php endif; ?>
							<?php // echo $this->getChildHtml('addto') ?>
						</div>
						<?php echo $this->getChildHtml('extra_buttons') ?>
					<?php elseif (!$_product->isSaleable()): ?>
						<div class="add-to-box">
							<?php echo $this->getChildHtml('addto') ?>
						</div>
					<?php endif; ?>
		
					<?php echo $this->getChildHtml('other');?>
		
					<?php if ($_product->isSaleable() && $this->hasOptions()):?>
						<?php echo $this->getChildChildHtml('container1', '', true, true) ?>
					<?php endif;?>
					
				</div>
				
				<div class="upsell">
					<?php echo $this->getChildHtml('upsell_products') ?>	
				</div>

			</div>

		</div>
	</form>
	<script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                // Remove custom datetime validators
                for (var methodName in Validation.methods) {
                    if (methodName.match(/^validate-datetime-.*/i)) {
                        delete Validation.methods[methodName];
                    }
                }

                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script>
	
	<div class="clear"></div>
	
	<div class="col-md-12 product-extra related t20">
		<?php echo $this->getLayout()->createBlock('catalog/product_list_related')->setTemplate('catalog/product/list/related.phtml')->toHtml() ?> 
	</div>
</div>
	



